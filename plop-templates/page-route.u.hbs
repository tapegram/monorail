-- {{pascalCase pageName}} Page, Controller, and Route
-- Generated by Monorail (plop)

-- =============================================================================
-- PAGE
-- =============================================================================

app.pages.{{camelCase pageName}}.view : '{Route} Html
app.pages.{{camelCase pageName}}.view = do
  use {{htmlLib}} article h1 p section text

  article []
    [ h1 [] [text "{{pascalCase pageName}}"]
    , section []
        [ p [] [text "Welcome to the {{pascalCase pageName}} page."]
        -- TODO: Add your content here
        ]
    ]

-- =============================================================================
-- ROUTE
-- =============================================================================

app.routes.{{camelCase pageName}} : '{Route, Log, Exception, Environment.Config} ()
app.routes.{{camelCase pageName}} =
  use Parser s

  routeHandler = do
{{#if hasParams}}
    paramId = route {{httpMethod}} (s "{{routePath}}" Parser./ Parser.text)
    -- TODO: Use paramId to fetch data
    html = app.pages.{{camelCase pageName}}.view ()
    renderedHtml = !(page.page [html] [])
    ok.html ({{htmlLib}}.toText renderedHtml)
{{else}}
    noCapture {{httpMethod}} (s "{{routePath}}")
    html = app.pages.{{camelCase pageName}}.view ()
    renderedHtml = !(page.page [html] [])
    ok.html ({{htmlLib}}.toText renderedHtml)
{{/if}}
  routeHandler

-- =============================================================================
-- INTEGRATION
-- =============================================================================

{-
Add this route to your main routes composition:

app.routes db =
  use Route <|>
  -- ... existing routes ...
  app.routes.{{camelCase pageName}} <|> otherRoutes

The page will be available at: /{{routePath}}
-}
